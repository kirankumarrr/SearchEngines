<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <style>
      .subactionlayeraddedlist li {
        float: left;
        padding: 5px 20px;
      }
      li.li-active {
        background-color: #337ab7;
      }
      .clearboth::before {
        content: '';
      }
      .clearboth::after {
        display: block;
        clear: both;
        content: '';
      }
      .ActionLayer.actionHeading {
      	    text-transform: capitalize;
        width: auto;
        float: left;
        border-radius: 0;
        padding: 5px 8px;
        background-color: #337ab7;
        color: #fff;
        margin: 5px;
      }
      li.li-inactive {
        background: #fff;
      }
      .SubActionLayer {
        width: 90%;
        float: left;
        background: #f5f5f5;
      }
      ul.subactionlayeraddedlist {
        margin: 0;
        list-style-type: none;
        padding: 0;
      }
      .SubActionLayer .actionHeading {
        margin: 10px 0 0;
        font-size: 18px;
        border-bottom: 2px solid #295d92;
        margin-bottom: 5px;
        display: inline-block;
        padding: 0 10px 0 0;
        color: #295d92;
      }
      #showLayer {
        width: 100%;
        margin-bottom: 15px;
        border: 1px solid #ddd;
      }
      .selectorActionsDIV {
        display: inline-block;
        width: 50%;
        vertical-align: top;
      }
      .selectorAttributesDIV {
        display: inline-block;
        width: 49%;
        vertical-align: top;
      }
      .hide {
        display: none;
      }
      .show {
        display: block;
      }
      #selectorAttributes {
        position: absolute;
        background: #fff;
        width: 198px;
        height: 10em;
        border: solid 1px #c0c0c0;
        overflow: auto;
        margin-left: 120px;
      }

      .multiselect label {
        display: block;
      }

      .multiselect-on {
        color: #ffffff;
        background-color: #000099;
      }
      #selectorAttributes label {
        width: 100%;
        display: block;
      }
      .selectorAttributesDIV button {
        background: white;
        border: 1px solid;
        width: 200px;
      }
      .selecteSpecfiLayer {
        width: 100%;
        background: green;
      }
    </style>
  </head>
  <body>
    <div class="selectorActionsDIV">
      <label for="selectorActions">Actions</label>
      <select name="selectorActions" id="selectorActions">
        <option value=""></option>
        <option value="assemble">Assemble</option>
        <option value="clean">Cleaning</option>
        <option value="der">DER</option>
        <option value="disassemble">Disassemble</option>
        <option value="evaluate">Evaluate</option>
        <option value="inspect">Inspect</option>
        <option value="partout">Part Out</option>
        <option value="qc">QC</option>
        <option value="receive">Receive</option>
        <option value="ship">Shipping</option>
        <option value="teardown">Teardown</option>
        <option value="testing">Test</option>
      </select>
    </div>
    <div class="selectorAttributesDIV hide">
      <!-- <select name="selectorAttributes" id="selectorAttributes">
          <option value=""></option>
          <option value="charges" class="charges">Charges</option>
          <option value="directions" class="directions">Directions</option>
          <option value="equipment" class="equipment"></option>
          <option value="exclusions" class="exclusions"></option>
          <option value="expertise" class="expertise"></option>
          <option value="materiallist" class="materiallist"></option>
          <option value="measurements" class="measurements"></option>
          <option value="publications" class="publications"></option>
        </select> -->
      <div class="drop">
        <label for="selectorAttributes">Actions Attributes</label>
        <button
          type="button"
          class="multiselect dropdown-toggle btn btn-default"
          data-toggle="dropdown"
          title="None selected"
          aria-expanded="false"
        >
          <span class="multiselect-selected-text">None selected</span>
          <b class="caret"></b>
        </button>
        <div class="selectorAttributes hide" id="selectorAttributes">
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="selectall"
              id="selectall"
            />selectall</label
          >
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="Charges"
            />Charges</label
          >
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="Directions"
            />Directions</label
          >
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="Equipment"
            />Equipment</label
          >
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="Exclusions"
            />Exclusions</label
          >
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="Expertise"
            />Expertise</label
          >
          <label
            ><input type="checkbox" name="option[]" value="Material" />Material
            List</label
          >
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="Measurements"
            />Measurements</label
          >
          <label
            ><input
              type="checkbox"
              name="option[]"
              value="Publications"
            />Publications</label
          >
        </div>
      </div>
    </div>
    <div>
      <input type="button" value="Add" class="subBtn hide" />
    </div>
    <div id="showLayer" class="clearboth hide">
      <div class="ActionLayer actionHeading">Display</div>
      <div class="SubActionLayer">
        <h2 class="actionHeading">Display</h2>
        <div class="SubActionLayerDetails">
          <ul class="subactionlayeraddedlist clearboth" id="subLayerContainer">
            <li class="li-active">Display</li>
            <li class="li-inactive">Display</li>
          </ul>
          <div class="selecteSpecfiLayer comCharges">
          	<table width="100%">
			  <tr>
			    <th>Charges</th>
			    <th>Charges</th>
			    <th>Charges</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
          <div class="selecteSpecfiLayer comDirections hide">
          	<table width="100%">
			  <tr>
			    <th>Directions</th>
			    <th>Directions</th>
			    <th>Directions</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
           <div class="selecteSpecfiLayer comEquipment hide">
          	<table width="100%">
			  <tr>
			    <th>comEquipment</th>
			    <th>comEquipment</th>
			    <th>comEquipment</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
           <div class="selecteSpecfiLayer comExclusions hide">
          	<table width="100%">
			  <tr>
			    <th>Exclusions</th>
			    <th>Exclusions</th>
			    <th>Exclusions</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
           <div class="selecteSpecfiLayer comExpertise hide">
          	<table width="100%">
			  <tr>
			    <th>Expertise</th>
			    <th>Expertise</th>
			    <th>Expertise</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
           <div class="selecteSpecfiLayer comMaterial hide">
          	<table width="100%">
			  <tr>
			    <th>Material</th>
			    <th>Material</th>
			    <th>Material</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
           <div class="selecteSpecfiLayer comMeasurements hide">
          	<table width="100%">
			  <tr>
			    <th>Measurements</th>
			    <th>Measurements</th>
			    <th>Measurements</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
           <div class="selecteSpecfiLayer comPublications hide">
          	<table width="100%">
			  <tr>
			    <th>comPublications</th>
			    <th>comPublications</th>
			    <th>comPublications</th>
			  </tr>
			  <tr>
			    <td>Alfreds Futterkiste</td>
			    <td>Maria Anders</td>
			    <td>Germany</td>
			  </tr>
			  <tr>
			    <td>Centro comercial Moctezuma</td>
			    <td>Francisco Chang</td>
			    <td>Mexico</td>
			  </tr>
			</table>

          </div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function() {
        $('.multiselect').on('click', function() {
          $('#selectorAttributes').toggleClass('hide');
        });
        var titleArr = [];
        $('#selectorActions').on('change', function() {
          console.log($(this));
          if ($(this).val() !== '') {
            $('.selectorAttributesDIV, .subBtn').removeClass('hide');
          } else {
            $('.selectorAttributesDIV,.subBtn').addClass('hide');
          }
          console.log($(this).val());
        });
        $('.selectorAttributes input').on('click', function() {
          var checkboxes = $('.selectorAttributes').find('input:checkbox');
          var totalInputs = $('.selectorAttributes').find('input').length - 1;
          var allinputs = $('.selectorAttributes').find('input');

          $(this).each(function() {
            checkboxes.each(function() {
              if ($(this).val() != 'selectall') {
                var checkbox = $(this);
                if (checkbox.prop('checked')) {
                  checkbox.parent().addClass('multiselect-on');
                  if (!(titleArr.indexOf(checkbox.val()) > -1)) {
                    titleArr.push(checkbox.val());
                  }
                } else {
                  var index = titleArr.indexOf(checkbox.val());
                  if (index > -1) {
                    titleArr.splice(index, 1);
                  }
                }

                checkbox.click(function() {
                  if (checkbox.prop('checked')) {
                    checkbox.parent().addClass('multiselect-on');
                  } else {
                    checkbox.parent().removeClass('multiselect-on');

                    if (
                      $('.selectorAttributes').find('.multiselect-on').length ==
                      0
                    ) {
                      $('.multiselect-selected-text').text('Not selected');
                    }
                  }
                });
              }
            });
            console.log(titleArr);

            if ($('.selectorAttributes').find('.multiselect-on').length == 1) {
              $('.multiselect-selected-text').text($(this).val());
            } else {
              var a = $('.selectorAttributes').find('.multiselect-on').length;
              $('.multiselect-selected-text').text(a + ' selected');
            }
          
          });
        });
        $('#selectall').on('click', function() {
          titleArr = [];
          var checkboxes = $('.selectorAttributes').find('input:checkbox');
          var totalInputs = $('.selectorAttributes').find('input').length - 1;
          var allinputs = $('.selectorAttributes').find('input');
          if ($(this).prop('checked')) {
            $(this)
              .parent()
              .addClass('multiselect-on');
            checkboxes.each(function() {
              var checkbox = $(this);
              totalInputs = totalInputs;
              $('.multiselect-selected-text').text(
                'Seleted all' + '(' + totalInputs + ')'
              );
              allinputs.each(function() {
                $(this).prop('checked', true);
                $(this)
                  .parent()
                  .addClass('multiselect-on');
                if (!(titleArr.indexOf(checkbox.val()) > -1)) {
                  if (checkbox.val() != 'selectall') {
                    titleArr.push(checkbox.val());
                  }
                }
              });
            });
          } else {
            $('.multiselect-selected-text').text('None selected');
            allinputs.each(function() {
              $(this).prop('checked', false);
              $(this)
                .parent()
                .removeClass('multiselect-on');
              titleArr = [];
            });
          }
          console.log(titleArr);
        });
        // add
        $('.subBtn').on('click', function() {
          console.log(titleArr);
          var html = '';
          for (var i = 0; i < titleArr.length; i++) {
            if (i == 0) {
              html += '<li class="li-active">' + titleArr[i] + '</li>';
            } else {
              html += '<li class="li-inactive">' + titleArr[i] + '</li>';
            }
          }
          $('.subactionlayeraddedlist').html(html);
           $(".ActionLayer.actionHeading").text($("#selectorActions").val());
          $("#showLayer").removeClass("hide");

        });
        $('.SubActionLayerDetails').on('click', 'li', function() {
        	var current = $(this).text();
        	var previous = $(this).parent().find('.li-active').text();
          $(this)
            .parent()
            .find('.li-active')
            .removeClass('li-active')
            .addClass('li-inactive');
          $(this)
            .removeClass('li-inactive')
            .addClass('li-active');
             $(".com"+current).removeClass('hide');
     		$(".com"+previous).addClass('hide'); 
        });

      });
    </script>
  </body>
</html>